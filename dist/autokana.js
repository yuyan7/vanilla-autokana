!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AutoKana=e():t.AutoKana=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=14)}([function(t,e){var n=t.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(4),i=n(0),u=n(19),o=n(21),a=n(7),c=function(t,e,n){var s,f,l,p=t&c.F,h=t&c.G,v=t&c.S,g=t&c.P,y=t&c.B,d=t&c.W,b=h?i:i[e]||(i[e]={}),m=b.prototype,k=h?r:v?r[e]:(r[e]||{}).prototype;for(s in h&&(n=e),n)(f=!p&&k&&void 0!==k[s])&&a(b,s)||(l=f?k[s]:n[s],b[s]=h&&"function"!=typeof k[s]?n[s]:y&&f?u(l,r):d&&k[s]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):g&&"function"==typeof l?u(Function.call,l):l,g&&((b.virtual||(b.virtual={}))[s]=l,t&c.R&&m&&!m[s]&&o(m,s,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(22),i=n(23),u=n(25),o=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(r(t),e=u(e,!0),r(n),i)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(28),i=n(37);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(10),i=n(11);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(11);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bind=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new r.default(t,e,n)};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(15))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(16)),i=a(n(40)),u=a(n(41)),o=a(n(45));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){e=e?e.replace(/([[\]().?/*{}+$^:])/g,"$1"):" \\s ";var n=new RegExp("^["+e+"]+","g");return t.replace(n,"")}function s(t){var e=Number(t);return e>=12353&&e<=12435||12445===e||12446===e}var f=/[^ 　ぁあ-んー]/g,l=/[ぁぃぅぇぉっゃゅょ]/g,p={"あ":"a","い":"i","う":"u","え":"e","お":"o","か":"ka","き":"ki","く":"ku","け":"ke","こ":"ko","さ":"sa","し":"si","す":"su","せ":"se","そ":"so","た":"ta","ち":"ti","つ":"tu","て":"te","と":"to","な":"na","に":"ni","ぬ":"nu","ね":"ne","の":"no","は":"ha","ひ":"hi","ふ":"hu","へ":"he","ほ":"ho","ま":"ma","み":"mi","む":"mu","め":"me","も":"mo","や":"ya","ゆ":"yu","よ":"yo","ら":"ra","り":"ri","る":"ru","れ":"re","ろ":"ro","わ":"wa","ゐ":"i","ゑ":"e","を":"wo","が":"ga","ぎ":"gi","ぐ":"gu","げ":"ge","ご":"go","ざ":"za","じ":"zi","ず":"zu","ぜ":"ze","ぞ":"zo","だ":"da","ぢ":"di","づ":"du","で":"de","ど":"do","ば":"ba","び":"bi","ぶ":"bu","べ":"be","ぼ":"bo","ぱ":"pa","ぴ":"pi","ぷ":"pu","ぺ":"pe","ぽ":"po","きゃ":"kya","きゅ":"kyu","きょ":"kyo","しゃ":"sya","しゅ":"syu","しょ":"syo","ちゃ":"tya","ちゅ":"tyu","ちょ":"tyo","にゃ":"nya","にゅ":"nyu","にょ":"nyo","ひゃ":"hya","ひゅ":"hyu","ひょ":"hyo","みゃ":"mya","みゅ":"myu","みょ":"myo","りゃ":"rya","りゅ":"ryu","りょ":"ryo","ぎゃ":"gya","ぎゅ":"gyu","ぎょ":"gyo","じゃ":"zya","じゅ":"zyu","じょ":"zyo","ぢゃ":"dya","ぢゅ":"dyu","ぢょ":"dyo","びゃ":"bya","びゅ":"byu","びょ":"byo","ぴゃ":"pya","ぴゅ":"pyu","ぴょ":"pyo","、":", ","。":". ","　":" "},h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(this,t),this.isActive=!0,this.timer=null,this.initializeValues(),this.option=(0,r.default)({katakana:!1,roman:!1,debug:!1,checkInterval:30},u);var o=document.getElementById(c(e,"#")),a=document.getElementById(c(n,"#"));if(!o)throw new Error("Element not found: "+e);this.elName=o,this.registerEvents(this.elName),a&&(this.elFurigana=a)}return(0,u.default)(t,[{key:"getFurigana",value:function(){return this.furigana}},{key:"start",value:function(){this.isActive=!0}},{key:"stop",value:function(){this.isActive=!1}},{key:"toggle",value:function(t){if(t){var e=Event.element(t);e&&(this.isActive=e.checked)}else this.isActive=!this.isActive}},{key:"initializeValues",value:function(){this.baseKana="",this.furigana="",this.isConverting=!1,this.ignoreString="",this.input="",this.values=[]}},{key:"registerEvents",value:function(t){var e=this;t.addEventListener("blur",function(){e.debug("blur"),e.clearInterval()}),t.addEventListener("focus",function(){e.debug("focus"),e.onInput(),e.setInterval()}),t.addEventListener("keydown",function(){e.debug("keydown"),e.isConverting&&e.onInput()})}},{key:"clearInterval",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.timer&&clearInterval(this.timer)})},{key:"toKatakana",value:function(t){if(this.option.katakana){for(var e=void 0,n="",r=0;r<t.length;r+=1)s(e=t.charCodeAt(r))?n+=String.fromCharCode(e+96):n+=t.charAt(r);return n}if(this.option.roman){for(var i="",u=0;u<t.length;u+=1){var a=t.substr(u,2),c=p[a];c?(u+=1,i+=c):i+=(c=p[a[0]])||a[0]}return function(t){var e=t;e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/ん([aiueoy])/g,"n$1")).replace(/ん/g,"n")).replace(/n([bpm])/g,"m$1")).replace(/si/g,"shi")).replace(/ti/g,"chi")).replace(/tu/g,"tsu")).replace(/zi/g,"ji")).replace(/hu/g,"fu")).replace(/di/g,"ji")).replace(/du/g,"zu")).replace(/sy([auo])/g,"sh$1")).replace(/ty([auo])/g,"ch$1")).replace(/zy([auo])/g,"j$1");var n={"kuぁ":"kua","kuぃ":"kui","kuぇ":"kue","kuぉ":"kuo","guぁ":"gua","guぃ":"gui","guぇ":"gue","guぉ":"guo","fuぁ":"fua","fuぃ":"fui","fuぇ":"fue","fuぉ":"fuo","fuょ":"fuyo","ゔぁ":"bua","ゔぃ":"bui","ゔぇ":"bue","ゔぉ":"buo","ゔ":"bu","tsuぁ":"tsua","tsuぃ":"tsui","tsuぇ":"tsue","tsuぉ":"tsuo","deぃ":"dei","deゅ":"deyu","doぅ":"dou","uぃ":"ui","uぇ":"ue","uぉ":"uo","iぇ":"ie","jiぇ":"jie","chiぇ":"chie","teぃ":"tei"};return(0,o.default)(n).forEach(function(t){var r=new RegExp(t,"g");e=e.replace(r,n[t])}),e=(e=(e=(e=(e=(e=(e=(e=e.replace(/aー/g,"a")).replace(/iー/g,"i")).replace(/u[ーu]/g,"u")).replace(/eー/g,"e")).replace(/o[ーu]/g,"o")).replace(/oo([a-z])/g,"o$1")).replace(/っch/g,"tch")).replace(/っ([kstnhmyrwgzdbp])/g,"$1$1")}(i)}return t}},{key:"setFurigana",value:function(t){this.isConverting||(t&&(this.values=t),this.isActive&&(this.furigana=this.toKatakana(this.baseKana+this.values.join("")),this.elFurigana&&(this.elFurigana.value=this.furigana)))}},{key:"removeString",value:function(t){if(-1!==t.indexOf(this.ignoreString))return String(t).replace(this.ignoreString,"");for(var e=this.ignoreString.split(""),n=t.split(""),r=0;r<e.length;r+=1)e[r]===n[r]&&(n[r]="");return n.join("")}},{key:"checkConvert",value:function(t){if(!this.isConverting)if(Math.abs(this.values.length-t.length)>1){var e=t.join("").replace(l,"").split("");Math.abs(t.length-e.length)<2&&Math.abs(this.values.length-e.length)>1&&this.onConvert()}else this.values.length===this.input.length&&this.values.join("")!==this.input&&this.input.match(f)&&this.onConvert()}},{key:"checkValue",value:function(){var t=void 0;if(""===(t=this.elName.value))this.initializeValues(),this.setFurigana();else{if(t=this.removeString(t),this.input===t)return;if(this.input=t,this.isConverting)return;var e=t.replace(f,"").split("");this.checkConvert(e),this.setFurigana(e)}this.debug(this.input)}},{key:"setInterval",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.timer=setInterval(this.checkValue.bind(this),this.option.checkInterval)})},{key:"onInput",value:function(){this.elFurigana&&(this.baseKana=this.elFurigana.value),this.isConverting=!1,this.ignoreString=this.elName.value}},{key:"onConvert",value:function(){this.baseKana=this.baseKana+this.values.join(""),this.isConverting=!0,this.values=[]}},{key:"debug",value:function(){var t;this.option.debug&&(t=console).log.apply(t,arguments)}}]),t}();e.default=h},function(t,e,n){t.exports={default:n(17),__esModule:!0}},function(t,e,n){n(18),t.exports=n(0).Object.assign},function(t,e,n){var r=n(3);r(r.S+r.F,"Object",{assign:n(27)})},function(t,e,n){var r=n(20);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(6),i=n(26);t.exports=n(1)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(5);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(1)&&!n(2)(function(){return 7!=Object.defineProperty(n(24)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(5),i=n(4).document,u=r(i)&&r(i.createElement);t.exports=function(t){return u?i.createElement(t):{}}},function(t,e,n){var r=n(5);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(8),i=n(38),u=n(39),o=n(13),a=n(10),c=Object.assign;t.exports=!c||n(2)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r})?function(t,e){for(var n=o(t),c=arguments.length,s=1,f=i.f,l=u.f;c>s;)for(var p,h=a(arguments[s++]),v=f?r(h).concat(f(h)):r(h),g=v.length,y=0;g>y;)l.call(h,p=v[y++])&&(n[p]=h[p]);return n}:c},function(t,e,n){var r=n(7),i=n(9),u=n(30)(!1),o=n(33)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),c=0,s=[];for(n in a)n!=o&&r(a,n)&&s.push(n);for(;e.length>c;)r(a,n=e[c++])&&(~u(s,n)||s.push(n));return s}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(9),i=n(31),u=n(32);t.exports=function(t){return function(e,n,o){var a,c=r(e),s=i(c.length),f=u(o,s);if(t&&n!=n){for(;s>f;)if((a=c[f++])!=a)return!0}else for(;s>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(12),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(12),i=Math.max,u=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):u(t,e)}},function(t,e,n){var r=n(34)("keys"),i=n(36);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(0),i=n(4),u=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return u[t]||(u[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(35)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!0},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(42));e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={default:n(43),__esModule:!0}},function(t,e,n){n(44);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(3);r(r.S+r.F*!n(1),"Object",{defineProperty:n(6).f})},function(t,e,n){t.exports={default:n(46),__esModule:!0}},function(t,e,n){n(47),t.exports=n(0).Object.keys},function(t,e,n){var r=n(13),i=n(8);n(48)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(3),i=n(0),u=n(2);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*u(function(){n(1)}),"Object",o)}}])});